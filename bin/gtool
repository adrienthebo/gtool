#!/usr/bin/env ruby
require 'gtool'
require 'gdata/error'
require 'thor/shell/color'
begin
  Gtool::CLI.start
rescue GData::Error::TokenInvalid
  Thor::Shell::Color.new.say "Invalid token, run '#{$0} auth generate' to generate a valid token.", :red
rescue GData::Error::QuotaExceeded
  Thor::Shell::Color.new.say "API quota exceeded, try again later.", :red
rescue GData::Error::InputInvalid => e
  raise e, "Malformed API request"
rescue GData::Error => e
  $stderr.puts "Generic GData API error occurred"
  $stderr.puts e.request.inspect
rescue Interrupt
  $stderr.puts "\nAborted!"
end
